{
  "name": "@spending-monitor/ingestion-service",
  "private": true,
  "version": "0.0.0",
  "description": "Transaction ingestion service with Kafka integration",
  "scripts": {
    "install:deps": "uv sync --extra dev",
    "dev": "KAFKA_HOST=localhost KAFKA_PORT=9092 uv run uvicorn src.main:app --reload --host 0.0.0.0 --port 8001",
    "start": "KAFKA_HOST=localhost KAFKA_PORT=9092 uv run uvicorn src.main:app --host 0.0.0.0 --port 8001",
    "test": "uv run pytest",
    "test:unit": "uv run pytest tests/unit/",
    "test:e2e": "uv run pytest tests/e2e/",
    "test:all": "uv run pytest --ignore-glob='**/tests/integration/*'",
    "lint": "uv run ruff check .",
    "lint:fix": "uv run ruff check . --fix",
    "format": "uv run ruff format .",
    "format:check": "uv run ruff format . --check",
    "type-check": "uv run mypy src/",
    "build:docker": "podman build . --file Containerfile --tag ingestion-service:latest",
    "helm:lint": "helm lint deploy/ingestion-service-py/helm",
    "e2e:test": "cd scripts && python3 e2e_test.py",
    "kafka:start": "podman-compose -f \"$(pwd)/deploy/kafka/compose.yaml\" up -d && echo 'Kafka starting... waiting for health check' && sleep 20 && npm run kafka:status",
    "kafka:stop": "podman-compose -f \"$(pwd)/deploy/kafka/compose.yaml\" down --volumes && echo 'Kafka stopped and volumes removed'",
    "kafka:status": "podman-compose -f \"$(pwd)/deploy/kafka/compose.yaml\" ps",
    "kafka:logs": "podman-compose -f \"$(pwd)/deploy/kafka/compose.yaml\" logs -f kafka",
    "kafka:logs:zookeeper": "podman-compose -f \"$(pwd)/deploy/kafka/compose.yaml\" logs -f zookeeper",
    "kafka:restart": "npm run kafka:stop && sleep 2 && npm run kafka:start",
    "kafka:topics": "podman exec kafka bin/kafka-topics.sh --bootstrap-server localhost:9092 --list",
    "kafka:create-topic": "podman exec kafka bin/kafka-topics.sh --bootstrap-server localhost:9092 --create --topic transactions --partitions 1 --replication-factor 1"
  }
}
